// Minimal ad domain blocklist
const adDomains = [
  "*://*.doubleclick.net/*",
  "*://*.googlesyndication.com/*",
  "*://*.adnxs.com/*",
  "*://*.taboola.com/*",
  "*://*.outbrain.com/*",
  "*://*.revcontent.com/*",
  "*://*.moatads.com/*",
  "*://*.adservice.google.com/*"
];

// Convert domains to blocking rules
const rules = adDomains.map((domain, i) => ({
  id: i + 1,
  priority: 1,
  action: { type: "block" },
  condition: { urlFilter: domain, resourceTypes: ["script", "image", "sub_frame", "xmlhttprequest"] }
}));

// Register rules
chrome.declarativeNetRequest.updateDynamicRules({
  removeRuleIds: rules.map(r => r.id),
  addRules: rules
});
